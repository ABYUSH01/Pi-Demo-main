import dotenv from 'dotenv';

console.log("NODE_ENV:", process.env.NODE_ENV);

const result = dotenv.config();

if (result.error) {
  if (process.env.NODE_ENV === "development") {
    console.error(".env file not found. This is an error condition in development. Additional error is logged below");
    throw result.error;
  }
  // In production (Render, Vercel, etc.), env variables are injected automatically
}

interface Environment {
  session_secret: string;
  pi_api_key: string;
  platform_api_url: string;
  mongo_host: string;
  mongo_db_name: string;
  mongo_user: string;
  mongo_password: string;
  frontend_url: string;
  serper_api_key: string;
}

const env: Environment = {
  session_secret: process.env.SESSION_SECRET || "fallback_secret_key",
  pi_api_key: process.env.PI_API_KEY || '',
  platform_api_url: process.env.PLATFORM_API_URL || '',

  // ðŸ”¹ GYARA: amfani da sunayen keys É—in da suke cikin Render Environment
  mongo_host: process.env.MONGODB_CLUSTER || 'localhost:27017',
  mongo_db_name: process.env.MONGODB_DBNAME || 'demo-app',
  mongo_user: process.env.MONGODB_USER || '',
  mongo_password: process.env.MONGODB_PASSWORD || '',

  frontend_url: process.env.FRONTEND_URL || 'http://localhost:3314',

  serper_api_key: process.env.SERPER_API_KEY || ''
};

export default env;
